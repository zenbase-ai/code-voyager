# Task 1 — Scaffold repo (plugin + Python package)

## Goal

Create the baseline structure that supports both:
- a **Claude Code plugin** (`.claude-plugin/`, `hooks/`, `skills/`, `scripts/`, optional `commands/`), and
- an installable **Python package** providing CLIs + shared libraries (`src/voyager/…`).

## Deliverables

- Plugin skeleton:
  - `.claude-plugin/plugin.json`
  - `hooks/hooks.json` (initial stub, no-op or minimal wiring)
  - `skills/` (create these 5 folders up front; content comes in later tasks):
    - `skills/session-brain/`
    - `skills/curriculum-planner/`
    - `skills/skill-factory/`
    - `skills/skill-retrieval/`
    - `skills/skill-refinement/`
  - `scripts/` (empty; filled in later tasks)
  - `commands/` (optional; filled in later tasks)
- Dogfooding harness (committed, repo-local):
  - `.claude/voyager/` (created/managed by scripts; can start empty)
  - `.claude/skills/local/` (runtime mirror of plugin `skills/`; populated by the sync helper)
  - `.claude/skills/generated/` (Skill Factory output root; can start empty)
  - `.claude/fixtures/`
    - `.claude/fixtures/hooks/` (sample hook input JSON blobs)
    - `.claude/fixtures/transcripts/` (sample transcript JSONL)
  - `.claude/settings.local.json` (or equivalent) configured for *project-local* hook testing (avoid modifying user/global settings)
  - `scripts/dev/` helpers:
    - a “sync” helper to mirror plugin `skills/` into a location the runtime can load for local testing (copy-based, not symlink-only)
- `.gitignore` policy for dogfooding:
  - ignore `/.claude/voyager/**`, `/.claude/skills/local/**`, and `/.claude/skills/generated/**` (runtime artifacts)
  - keep `/.claude/fixtures/**` committed (dogfood inputs)
- Python skeleton:
  - `src/voyager/__init__.py`
  - `src/voyager/cli/__init__.py` (and a small CLI framework)
  - `src/voyager/config.py` (paths + env var helpers)
- Update `pyproject.toml` with:
  - `project.scripts` entry points (stubs): `skill-index`, `find-skill`, `feedback-setup`, `skill-insights`
  - optional extras groups for heavy deps (e.g., `retrieval` for `ragatouille`)

## Implementation notes

- Keep plugin artifacts self-contained and only reference scripts via `${CLAUDE_PLUGIN_ROOT}` (per `docs/voyager.md`).
- Decide and document the canonical project state root:
  - `${CLAUDE_PROJECT_DIR}/.claude/voyager/` (Brain Store, curriculum, episodes, feedback DB pointer if desired).
- For dogfooding, default `${CLAUDE_PROJECT_DIR}` to the current repo root when the env var is missing.
- Match the repo’s runtime: `python>=3.13` (per `pyproject.toml` and `.mise.toml`).

## Acceptance criteria

- `pip install -e .` succeeds and exposes the four CLIs (even if they’re “not implemented yet”).
- Plugin manifest is valid JSON and references only in-repo paths.
- Repository tree matches the “Repo shape (target)” in `plan/README.md`.
- A developer can run hook scripts locally using fixture inputs under `./.claude/fixtures/` (even before real hook wiring exists).
